{
    "componentChunkName": "component---src-templates-lesson-template-js",
    "path": "/curl",
    "result": {"data":{"markdownRemark":{"html":"<p>While wget works more like cp, curl works more like a normal Linux program. It works more like cat where it operates on input and output streams. Because of this it is a more useful tool to have in your arsenal because you can plug it into other programs.</p>\n<p>So let's do some examples of how curl can be used to do testing against API servers. I frequently use curl for this (as opposed to something like Postman or Insomniac which are both great too.) First thing we're going to do is run a static file server from our home directory (on primary, fyi, we're done using the secondary machine.) Run this:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> ~\npython3 -m http.server <span class=\"token number\">8000</span> --bind <span class=\"token number\">0.0</span>.0.0</code></pre></div>\n<p>This uses Python to run a little HTTP server locally. It, like <code class=\"language-text\">php -S</code>, NGINX, Apache, or any of those things of the similar nature will serve files from your local system. So if I make a request to <a href=\"http://localhost:8000/brian.txt\">http://localhost:8000/brian.txt</a> I will get served whatever the file contents of brian.txt is from my home directory. Why did we choose Python here? Because Python ships with Ubuntu whereas we'd have to install other things. If you want to see what it's serving, use <code class=\"language-text\">ifconfig</code> to find your IP address and open <code class=\"language-text\">http://&lt;ip address>:8000</code> in your browser to see what it's serving.</p>\n<p>Okay, so now open a second shell inside primary. Easiest way is again probably to open Terminal.app/PowerShell and run <code class=\"language-text\">multipass shell primary</code> and it should hand you a new shell. Have the two shells side-by-side so you can see the output of both. Run this:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> http://localhost:8000</code></pre></div>\n<p>You'll get a bunch of HTML back from the server which is the same HTML that was served to your browser. Notice in your terminal that's running the HTTP server that it's reporting the HTTP requests, the path, the incoming IP and what <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\">HTTP verb</a> was used.</p>\n<p>Okay, so let's run through a bunch of common things to do with curl really quick. Again, this is a deep pool. If you need to do anything with making HTTP requests (or FTP or really any network protocol) then there's a high chance that curl can do it for you. I'm just going to introduce you to how I mostly use it.</p>\n<h2 id=\"output\" style=\"position:relative;\"><a href=\"#output\" aria-label=\"output permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Output</h2>\n<p>First of all, since curl is stream based, you can absolutely <code class=\"language-text\">curl &lt;url> > output.txt</code>. This is its chief advantage over wget in my opinion. You can plug it into a greater chain of commands. You can also use <code class=\"language-text\">-o &lt;file name></code> to redirect output to a file or just <code class=\"language-text\">-O</code> to redirect it to a file named by the same file name e.g. <a href=\"http://localhost:8000/brian.txt\">http://localhost:8000/brian.txt</a> would go to brian.txt</p>\n<h2 id=\"http-verbs\" style=\"position:relative;\"><a href=\"#http-verbs\" aria-label=\"http verbs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTTP Verbs</h2>\n<p>Something I'll frequently do to make sure an endpoint is working is <code class=\"language-text\">curl -I</code> (or <code class=\"language-text\">curl --head</code>). This will send a HEAD request instead of a GET request. HEAD requests just get the endpoint metadata and don't actually do a full request. This is a quick way to see if a server is ready to respond to a given request. Run <code class=\"language-text\">curl -I http://localhost:8000</code> and see what you get. Check the output from the server and see that it reports getting a HEAD request instead of a GET.</p>\n<p>Often you'll want to do other HTTP verbs as well like POST, PUT, DELETE, and PATCH. Of those, POST is by far the most common of those. Let's see how to do a POST. Run this:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -X POST http://localhost:8000\n<span class=\"token function\">curl</span> -d <span class=\"token string\">\"this is the body being sent with the HTTP request\"</span> http://localhost:8000\n<span class=\"token comment\"># both of these requests will fail because our static</span>\n<span class=\"token comment\"># file server doesn't know what to do with POST requests</span></code></pre></div>\n<p>The first one, <code class=\"language-text\">-X</code> allows you to specify what verb you want to use. In this case we used <code class=\"language-text\">POST</code>. In the second case, because we're using -d to send a POST body it implicitly sets the verb to POST as well. Again, both requests will fail because our server doesn't know what to do with POST requests. We expect that.</p>\n<p>By the same token, these will work too:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -X PUT http://localhost:8000\n<span class=\"token function\">curl</span> -X PATCH http://localhost:8000\n<span class=\"token function\">curl</span> -X DELETE http://localhost:8000\n<span class=\"token function\">curl</span> -X OPTIONS http://localhost:8000\n<span class=\"token function\">curl</span> -X LOL_THIS_ISNT_REAL http://localhost:8000</code></pre></div>\n<h2 id=\"cookies\" style=\"position:relative;\"><a href=\"#cookies\" aria-label=\"cookies permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cookies</h2>\n<p>Another very common thing to do is have to send <a href=\"https://en.wikipedia.org/wiki/HTTP_cookie\">cookies</a> with your request as well.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -b <span class=\"token string\">\"name=brian\"</span> http://localhost:8000</code></pre></div>\n<p>This won't show up in the output of the HTTP server since it doesn't print cookies but yeah, this will send a cookie string along for the ride for you.</p>\n<p>Cookie jar files can be useful too. If you're making a lot of requests and need to send a lot of cookies, you can put all of those into a file and use <code class=\"language-text\">-c &lt;file name></code> to use those as your cookies.</p>\n<h2 id=\"redirects\" style=\"position:relative;\"><a href=\"#redirects\" aria-label=\"redirects permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Redirects</h2>\n<p>Try running this:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> http://bit.ly/linux-cli</code></pre></div>\n<p>You'll notice you'll just a redirect notice. By default curl won't follow redirects. If you do <code class=\"language-text\">curl -L http://bit.ly/linux-cli</code> you'll tell curl to follow the redirect and you'll end up with the full course's website.</p>\n<h2 id=\"headers\" style=\"position:relative;\"><a href=\"#headers\" aria-label=\"headers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Headers</h2>\n<p>Another helpful thing is to be able to include headers. You'll use <code class=\"language-text\">-H</code> and you'll do one header per <code class=\"language-text\">-H</code> (meaning you'll need multiple <code class=\"language-text\">-H</code> to do multiple different headers)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -H <span class=\"token string\">\"'accept-language: en-US\"</span> -H <span class=\"token string\">\"Authorization: Bearer 12345\"</span> http://localhost:8000</code></pre></div>\n<h2 id=\"edge--chrome--firefox-curls\" style=\"position:relative;\"><a href=\"#edge--chrome--firefox-curls\" aria-label=\"edge  chrome  firefox curls permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Edge / Chrome / Firefox curls</h2>\n<p>One very cool feature of modern browsers is the ability to copy requests out of your network panel in your dev tools as curl requests and then be able to replay them from the command line. I do this all the time to properly formulate requests and get all the auth headers right.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/complete-intro-to-linux-and-the-cli/static/b4d8cf04fa6fe0fcd55b41e25ef0a3ac/2aa89/curl.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACyklEQVQ4y32TWYvcRhSF9f/9Mg/Oc/IjspDY2OAkEELGJIzp9L6OuqVWS6XSWqqS9IVbPc2QMBPBoSR076lz7hJEZUdUPSP2sCS1pW4Npm0xRmCe0bZUZUme56RpShzHHMOQqqoIvvp45K3gQ8jbD0fk++7dga8/hRyWa45RTBQnnOOY8/nMJUl4PMUcozNKZZRlSRiGKKVIkoTgu/f3vPv0hfe/Tvj+45/8/NuMh5Visk6JtlvyokQXpU9YrVYey+WS0+lEFEVkWeYVaq25XC4Ef4Wah1PJJGl4iGv+Piquz8j+8MhmvWaz2fjgG8SmqJFTqdy/C7lcGrz5dsndT4/c/bjnzQ87vvnlhHOWulSotuDS5JSmwVmLcw5rr3DGYJ3FdIauM1jbYbuO4H564fMs4/M8449pype1Yuh7H9DZnn4E1w90rse6nqbraYzDNA2DGxns+PTvGhPwwjMOg0/eHY5E55QkKzhFMeEx4hCeOEmTooT77ZTfd1NKXZMqTZrlBMM48i8Mgyc0nfM1nM9mtK3x9ZGuir1h6OmNZXHZs6oT2kZKVPpSBeM4coNX598Hcl2z3R18V2X2kuRCHJ9J08zXUlApTe9GdNXSlBXW2mfLN8Kbwn4Y2R1CFosFxnReoYxIVdU+VpJFcdXZJ8LSN+l/CGG3v1oWNTJnQiqjMvj/AyrLqK1D18Yr7KTL/yWUc+gtdVWw24eeMM+1tyurJioLGXat/aoprUkuKTrP/cWvEDpf/L23PPeJMrxCKKsmduu69mcmuxxFNE3j81+07DE+WZ7PvBXZkHOS+FNiexnyvkd7lQVuvHK8qFBqKMMsTRHLQigWRZGPG2WYHbbUZJsVyW6D2q6xbfs6ocqra5fnc094218ZIdkkI+unUtLJA+fFFPe4FXuvEI6icGSzOzCZTLwyqaOovEGInVxclKQqJ9MFTdPyDwqbD7dc4ES9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"copying a URL out of Edge dev tools\"\n        title=\"copying a URL out of Edge dev tools\"\n        src=\"/complete-intro-to-linux-and-the-cli/static/b4d8cf04fa6fe0fcd55b41e25ef0a3ac/5a190/curl.png\"\n        srcset=\"/complete-intro-to-linux-and-the-cli/static/b4d8cf04fa6fe0fcd55b41e25ef0a3ac/772e8/curl.png 200w,\n/complete-intro-to-linux-and-the-cli/static/b4d8cf04fa6fe0fcd55b41e25ef0a3ac/e17e5/curl.png 400w,\n/complete-intro-to-linux-and-the-cli/static/b4d8cf04fa6fe0fcd55b41e25ef0a3ac/5a190/curl.png 800w,\n/complete-intro-to-linux-and-the-cli/static/b4d8cf04fa6fe0fcd55b41e25ef0a3ac/c1b63/curl.png 1200w,\n/complete-intro-to-linux-and-the-cli/static/b4d8cf04fa6fe0fcd55b41e25ef0a3ac/29007/curl.png 1600w,\n/complete-intro-to-linux-and-the-cli/static/b4d8cf04fa6fe0fcd55b41e25ef0a3ac/2aa89/curl.png 1698w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"curl--bash\" style=\"position:relative;\"><a href=\"#curl--bash\" aria-label=\"curl  bash permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>curl | bash</h2>\n<p>One last note here, a lot of tutorials or installation of tools will have you do a request of <code class=\"language-text\">curl &lt;url> | bash</code>. This will nab the contents of the URL off the network and pipe that directly into bash which will execute what's in the contents of the network request. This should make you uncomfortable. You're basically giving whoever controls that URL unlimited access to your computer. But hey! It's really convenient too: you just get and execute the file instantly.</p>\n<p>So what's my rule of thumb for doing that? A lot of people will tell you never, ever do it. I'll tell you <em>almost</em> never, ever do it. There's a few things to keep in mind when you do it.</p>\n<ul>\n<li>Always read the script you're about to invoke. You know enough now to see notice anything fishy. Be especially suspicious of them making more network requests or decoding base64 strings</li>\n<li>Only do it from domains you trust. It's actually possible to detect a curl request as opposed to a browser request, meaning you can load the file in a browser and see something and then when you go to curl it they can serve you a different file. Basically means I only will do <code class=\"language-text\">curl | bash</code> from GitHub.</li>\n<li>When in doubt just <code class=\"language-text\">curl url > file.sh</code> and then read the file. From there, <code class=\"language-text\">chmod 700 file.sh</code> and <code class=\"language-text\">. file.sh</code>. It's not that many more steps.</li>\n</ul>","frontmatter":{"path":"/curl","title":"curl","order":"7D","section":"Networking and the Internet","description":"Frequently developers will want to interact with the network. Linux provides two command lines that are very well poised to help a developer out. Brian talks about two of the most popular, wget and curl."}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"order":"9C","path":"/conditionals","title":"Conditionals"}}},{"node":{"frontmatter":{"order":"10C","path":"/conclusion","title":"Conclusion"}}},{"node":{"frontmatter":{"order":"7D","path":"/curl","title":"curl"}}},{"node":{"frontmatter":{"order":"3A","path":"/anatomy-of-a-cli-command","title":"Anatomy of a CLI Command"}}},{"node":{"frontmatter":{"order":"6A","path":"/environments","title":"Environments"}}},{"node":{"frontmatter":{"order":"10A","path":"/cron","title":"cron"}}},{"node":{"frontmatter":{"order":"10D","path":"/errata","title":"Errata"}}},{"node":{"frontmatter":{"order":"1A","path":"/intro","title":"Introduction"}}},{"node":{"frontmatter":{"order":"9D","path":"/loops-and-arrays","title":"Loops and Arrays"}}},{"node":{"frontmatter":{"order":"8B","path":"/apt","title":"APT"}}},{"node":{"frontmatter":{"order":"4A","path":"/nano","title":"nano"}}},{"node":{"frontmatter":{"order":"6D","path":"/process-operators","title":"Exit Codes, Process Operators, and Subcommands"}}},{"node":{"frontmatter":{"order":"6B","path":"/processes","title":"Processes"}}},{"node":{"frontmatter":{"order":"2C","path":"/lets-run-linux","title":"Let's Run Linux"}}},{"node":{"frontmatter":{"order":"7B","path":"/sftp","title":"SFTP"}}},{"node":{"frontmatter":{"order":"8C","path":"/snaps","title":"Snaps"}}},{"node":{"frontmatter":{"order":"5A","path":"/interacting-with-files","title":"Interacting with Files"}}},{"node":{"frontmatter":{"order":"10B","path":"/customize-your-shell","title":"Customize Your Shell"}}},{"node":{"frontmatter":{"order":"5C","path":"/streams-and-pipes","title":"Streams and Pipes"}}},{"node":{"frontmatter":{"order":"9B","path":"/variables","title":"Variables"}}},{"node":{"frontmatter":{"order":"3B","path":"/common-tips-and-tricks","title":"Common Tips and Tricks"}}},{"node":{"frontmatter":{"order":"3C","path":"/signals-and-the-power-of-ctrl","title":"Signals and the Power of CTRL"}}},{"node":{"frontmatter":{"order":"4B","path":"/vim","title":"vim"}}},{"node":{"frontmatter":{"order":"2B","path":"/what-is-linux","title":"What is Linux"}}},{"node":{"frontmatter":{"order":"5D","path":"/users-groups-and-permissions","title":"Users, Groups, and Permissions"}}},{"node":{"frontmatter":{"order":"2A","path":"/what-will-you-learn","title":"What you will learn"}}},{"node":{"frontmatter":{"order":"7C","path":"/wget","title":"wget"}}},{"node":{"frontmatter":{"order":"5B","path":"/lol","title":"Wildcards and Replacements"}}},{"node":{"frontmatter":{"order":"8A","path":"/what-is-package-management","title":"What is Package Management"}}},{"node":{"frontmatter":{"order":"9A","path":"/writing-your-own-scripts","title":"Writing Your Own Scripts"}}},{"node":{"frontmatter":{"order":"7A","path":"/ssh","title":"SSH"}}}]}},"pageContext":{}},
    "staticQueryHashes": ["2959687377"]}